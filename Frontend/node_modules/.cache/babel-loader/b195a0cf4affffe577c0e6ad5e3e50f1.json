{"ast":null,"code":"import _regeneratorRuntime from \"/home/nineleaps/Sattebaaz/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/home/nineleaps/Sattebaaz/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"/home/nineleaps/Sattebaaz/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/nineleaps/Sattebaaz/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/nineleaps/Sattebaaz/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/nineleaps/Sattebaaz/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/nineleaps/Sattebaaz/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/nineleaps/Sattebaaz/src/util/search/search.js\";\nimport _ from \"lodash\";\nimport React, { Component } from \"react\";\nimport { Search, Grid } from \"semantic-ui-react\";\nimport axios from 'axios';\nimport \"./search.css\";\nvar source = {};\n\nvar SearchBar = /*#__PURE__*/function (_Component) {\n  _inherits(SearchBar, _Component);\n\n  function SearchBar() {\n    var _this;\n\n    _classCallCheck(this, SearchBar);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(SearchBar).call(this));\n\n    _this.search = /*#__PURE__*/function () {\n      var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(value) {\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return axios.get(\"https://344baddd.ngrok.io/all_ticker\").then(function (res) {\n                  var data = res.data;\n                  source = data;\n                });\n\n              case 2:\n                console.log(source);\n\n              case 3:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      return function (_x) {\n        return _ref.apply(this, arguments);\n      };\n    }();\n\n    _this.resetComponent = function () {\n      _this.setState({\n        isLoading: false,\n        results: [],\n        value: \"\"\n      });\n    };\n\n    _this.handleResultSelect = function (e, _ref2) {\n      var result = _ref2.result;\n      console.log(result);\n\n      _this.setState({\n        ticker: result\n      });\n\n      console.log(_this.state.selCheckId);\n    };\n\n    _this.handleSearchChange = function (e, _ref3) {\n      var value = _ref3.value;\n      console.log(e.target.value);\n\n      _this.search(e.target.value);\n\n      _this.setState({\n        isLoading: true,\n        value: value\n      });\n\n      console.log(source);\n      setTimeout(function () {\n        if (_this.state.value.length < 1) return _this.resetComponent();\n        var re = new RegExp(_.escapeRegExp(_this.state.value), \"i\");\n\n        var isMatch = function isMatch(result) {\n          return re.test(result.title, result.category);\n        };\n\n        _this.setState({\n          isLoading: false,\n          results: _.filter(source, isMatch)\n        });\n      }, 300);\n    };\n\n    _this.state = {\n      data: [],\n      ticker: '',\n      tag: \"\"\n    };\n    return _this;\n  }\n\n  _createClass(SearchBar, [{\n    key: \"componentWillMount\",\n    value: function componentWillMount() {\n      this.resetComponent();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$state = this.state,\n          isLoading = _this$state.isLoading,\n          value = _this$state.value,\n          results = _this$state.results;\n      return /*#__PURE__*/React.createElement(\"div\", {\n        style: {\n          \"display\": \"flex\",\n          \"justify-content\": \"flex-end\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 66,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(Grid, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 67,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(Grid.Column, {\n        width: 6,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 68,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(Search, {\n        className: \"searchbox\",\n        placeholder: \"Looking for a Stock?\",\n        loading: isLoading,\n        onResultSelect: this.handleResultSelect,\n        onSearchChange: _.debounce(this.handleSearchChange, 500, {\n          leading: true\n        }),\n        results: results,\n        value: value,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 13\n        }\n      }))));\n    }\n  }]);\n\n  return SearchBar;\n}(Component);\n\nexport default SearchBar;","map":{"version":3,"sources":["/home/nineleaps/Sattebaaz/src/util/search/search.js"],"names":["_","React","Component","Search","Grid","axios","source","SearchBar","search","value","get","then","res","data","console","log","resetComponent","setState","isLoading","results","handleResultSelect","e","result","ticker","state","selCheckId","handleSearchChange","target","setTimeout","length","re","RegExp","escapeRegExp","isMatch","test","title","category","filter","tag","debounce","leading"],"mappings":";;;;;;;;AAAA,OAAOA,CAAP,MAAc,QAAd;AACA,OAAOC,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,SAASC,MAAT,EAAiBC,IAAjB,QAA6B,mBAA7B;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAO,cAAP;AAEA,IAAIC,MAAM,GAAG,EAAb;;IACMC,S;;;AACJ,uBAAc;AAAA;;AAAA;;AACZ;;AADY,UAWZC,MAXY;AAAA,0EAWL,iBAAOC,KAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBACDJ,KAAK,CAACK,GAAN,yCACLC,IADK,CACA,UAAAC,GAAG,EAAI;AACT,sBAAMC,IAAI,GAAGD,GAAG,CAACC,IAAjB;AACAP,kBAAAA,MAAM,GAAGO,IAAT;AACD,iBAJG,CADC;;AAAA;AAMNC,gBAAAA,OAAO,CAACC,GAAR,CAAYT,MAAZ;;AANM;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAXK;;AAAA;AAAA;AAAA;AAAA;;AAAA,UAqBdU,cArBc,GAqBG,YAAM;AACrB,YAAKC,QAAL,CAAc;AAAEC,QAAAA,SAAS,EAAE,KAAb;AAAoBC,QAAAA,OAAO,EAAE,EAA7B;AAAiCV,QAAAA,KAAK,EAAE;AAAxC,OAAd;AACD,KAvBa;;AAAA,UAyBdW,kBAzBc,GAyBQ,UAACC,CAAD,SAAmB;AAAA,UAAbC,MAAa,SAAbA,MAAa;AACrCR,MAAAA,OAAO,CAACC,GAAR,CAAYO,MAAZ;;AAEC,YAAKL,QAAL,CAAc;AACfM,QAAAA,MAAM,EAACD;AADQ,OAAd;;AAGHR,MAAAA,OAAO,CAACC,GAAR,CAAY,MAAKS,KAAL,CAAWC,UAAvB;AACD,KAhCa;;AAAA,UAkCdC,kBAlCc,GAkCO,UAACL,CAAD,SAAkB;AAAA,UAAZZ,KAAY,SAAZA,KAAY;AACrCK,MAAAA,OAAO,CAACC,GAAR,CAAYM,CAAC,CAACM,MAAF,CAASlB,KAArB;;AAEA,YAAKD,MAAL,CAAYa,CAAC,CAACM,MAAF,CAASlB,KAArB;;AACA,YAAKQ,QAAL,CAAc;AAAEC,QAAAA,SAAS,EAAE,IAAb;AAAmBT,QAAAA,KAAK,EAALA;AAAnB,OAAd;;AACAK,MAAAA,OAAO,CAACC,GAAR,CAAYT,MAAZ;AAEAsB,MAAAA,UAAU,CAAC,YAAM;AACf,YAAI,MAAKJ,KAAL,CAAWf,KAAX,CAAiBoB,MAAjB,GAA0B,CAA9B,EAAiC,OAAO,MAAKb,cAAL,EAAP;AAEjC,YAAMc,EAAE,GAAG,IAAIC,MAAJ,CAAW/B,CAAC,CAACgC,YAAF,CAAe,MAAKR,KAAL,CAAWf,KAA1B,CAAX,EAA6C,GAA7C,CAAX;;AACA,YAAMwB,OAAO,GAAG,SAAVA,OAAU,CAAAX,MAAM;AAAA,iBAAIQ,EAAE,CAACI,IAAH,CAAQZ,MAAM,CAACa,KAAf,EAAsBb,MAAM,CAACc,QAA7B,CAAJ;AAAA,SAAtB;;AAEA,cAAKnB,QAAL,CAAc;AACZC,UAAAA,SAAS,EAAE,KADC;AAEZC,UAAAA,OAAO,EAAEnB,CAAC,CAACqC,MAAF,CAAS/B,MAAT,EAAiB2B,OAAjB;AAFG,SAAd;AAID,OAVS,EAUP,GAVO,CAAV;AAWD,KApDa;;AAEZ,UAAKT,KAAL,GAAa;AACXX,MAAAA,IAAI,EAAE,EADK;AAEXU,MAAAA,MAAM,EAAC,EAFI;AAGXe,MAAAA,GAAG,EAAC;AAHO,KAAb;AAFY;AAOb;;;;yCACoB;AACnB,WAAKtB,cAAL;AACD;;;6BA4CQ;AAAA,wBAC+B,KAAKQ,KADpC;AAAA,UACCN,SADD,eACCA,SADD;AAAA,UACYT,KADZ,eACYA,KADZ;AAAA,UACmBU,OADnB,eACmBA,OADnB;AAEP,0BACI;AAAK,QAAA,KAAK,EAAE;AAAC,qBAAW,MAAZ;AAAoB,6BAAmB;AAAvC,SAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACA,oBAAC,IAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE,oBAAC,IAAD,CAAM,MAAN;AAAa,QAAA,KAAK,EAAE,CAApB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE,oBAAC,MAAD;AACE,QAAA,SAAS,EAAC,WADZ;AAEE,QAAA,WAAW,EAAC,sBAFd;AAGE,QAAA,OAAO,EAAED,SAHX;AAIE,QAAA,cAAc,EAAE,KAAKE,kBAJvB;AAKE,QAAA,cAAc,EAAEpB,CAAC,CAACuC,QAAF,CAAW,KAAKb,kBAAhB,EAAoC,GAApC,EAAyC;AACvDc,UAAAA,OAAO,EAAE;AAD8C,SAAzC,CALlB;AAQE,QAAA,OAAO,EAAErB,OARX;AASE,QAAA,KAAK,EAAEV,KATT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADF,CADF,CADA,CADJ;AAmBD;;;;EA5EqBP,S;;AA+ExB,eAAeK,SAAf","sourcesContent":["import _ from \"lodash\";\nimport React, { Component } from \"react\";\nimport { Search, Grid } from \"semantic-ui-react\";\nimport axios from 'axios';\nimport \"./search.css\";\n\nvar source = {};\nclass SearchBar extends Component {\n  constructor() {\n    super();\n    this.state = {\n      data: [],\n      ticker:'',\n      tag:\"\",\n    };\n  }\n  componentWillMount() {\n    this.resetComponent();\n  }\n    search=async (value)=> { \n    await axios.get(`https://344baddd.ngrok.io/all_ticker`)\n    .then(res => {\n        const data = res.data;\n        source = data;\n      })\n     console.log(source);\n  \n  }\n\n  resetComponent = () => {\n    this.setState({ isLoading: false, results: [], value: \"\" });\n  };\n\n  handleResultSelect =  (e, { result }) => {   \n      console.log(result);\n       \n       this.setState({\n      ticker:result\n    });\n    console.log(this.state.selCheckId);\n  };\n\n  handleSearchChange = (e, { value }) => {\n    console.log(e.target.value);\n      \n    this.search(e.target.value);\n    this.setState({ isLoading: true, value });\n    console.log(source);\n    \n    setTimeout(() => {\n      if (this.state.value.length < 1) return this.resetComponent();\n\n      const re = new RegExp(_.escapeRegExp(this.state.value), \"i\");\n      const isMatch = result => re.test(result.title, result.category);\n\n      this.setState({\n        isLoading: false,\n        results: _.filter(source, isMatch)\n      });\n    }, 300);\n  };\n\n  render() {\n    const { isLoading, value, results } = this.state;\n    return (\n        <div style={{\"display\": \"flex\", \"justify-content\": \"flex-end\"}}>\n        <Grid>\n          <Grid.Column width={6}>\n            <Search\n              className=\"searchbox\"\n              placeholder=\"Looking for a Stock?\"\n              loading={isLoading}\n              onResultSelect={this.handleResultSelect}\n              onSearchChange={_.debounce(this.handleSearchChange, 500, {\n                leading: true\n              })}\n              results={results}\n              value={value}\n            />\n          </Grid.Column>\n        </Grid>\n      </div>\n    );\n  }\n}\n\nexport default SearchBar;\n"]},"metadata":{},"sourceType":"module"}